(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,19906,e=>{"use strict";var t=e.i(43476),a=e.i(71645),r=e.i(18566),s=e.i(37727);function l(){let e=(0,r.useRouter)(),[l,o]=(0,a.useState)([]),[i,n]=(0,a.useState)(!0),[c,d]=(0,a.useState)(!1),[m,u]=(0,a.useState)("add"),[x,p]=(0,a.useState)(null),[g,h]=(0,a.useState)({name:"",price:"",stock:"",description:"",image:""}),[b,f]=(0,a.useState)("");(0,a.useEffect)(()=>{k()},[]);let k=async()=>{try{n(!0);let t=localStorage.getItem("adminToken");if(!t)return void e.push("/login");let a=await fetch("http://localhost:5000/api/menu/all",{headers:{Authorization:`Bearer ${t}`}});if(!a.ok)throw Error("Failed to fetch products");let r=await a.json(),s=r.data||r;o(Array.isArray(s)?s:[])}catch(e){console.error("Error fetching products:",e),alert("Gagal memuat data produk")}finally{n(!1)}},v=(e,t)=>{u(e),"edit"===e&&t?(p(t),h({name:t.name,price:t.price.toString(),stock:t.stock.toString(),description:t.description||"",image:t.image||""}),f(t.image||"")):(p(null),h({name:"",price:"",stock:"",description:"",image:""}),f("")),d(!0)},y=()=>{d(!1),p(null),f(""),h({name:"",price:"",stock:"",description:"",image:""})},j=async t=>{if(t.preventDefault(),!g.name||!g.price||!g.stock)return void alert("Mohon lengkapi Nama, Harga, dan Stok produk");try{let t=localStorage.getItem("adminToken");if(!t)return void e.push("/login");let a={name:g.name,price:parseFloat(g.price),stock:parseInt(g.stock),description:g.description||null,image:g.image||null},r="edit"===m?`http://localhost:5000/api/menu/${x?.id}`:"http://localhost:5000/api/menu";if(!(await fetch(r,{method:"edit"===m?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`},body:JSON.stringify(a)})).ok)throw Error("Failed to save product");alert("edit"===m?"âœ… Produk berhasil diupdate!":"âœ… Produk berhasil ditambahkan!"),y(),k()}catch(e){console.error("Error saving product:",e),alert("âŒ Gagal menyimpan produk: "+e.message)}},N=async t=>{let a=+(1!==t.is_active);if(confirm(`Apakah Anda yakin ingin ${1===a?"mengaktifkan":"menonaktifkan"} produk "${t.name}"?

${0===a?"âš ï¸ Produk tidak akan muncul di halaman order customer":"âœ… Produk akan muncul kembali di halaman order customer"}`))try{let r=localStorage.getItem("adminToken");if(!r)return void e.push("/login");if(!(await fetch(`http://localhost:5000/api/menu/${t.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${r}`},body:JSON.stringify({name:t.name,price:t.price,stock:t.stock,description:t.description,image:t.image,is_active:a})})).ok)throw Error("Failed to toggle product status");alert(`âœ… Produk berhasil ${1===a?"diaktifkan":"dinonaktifkan"}!`),k()}catch(e){console.error("Error toggling product status:",e),alert("âŒ Gagal mengubah status produk: "+e.message)}},w=async t=>{if(confirm("Apakah Anda yakin ingin menghapus produk ini?"))try{let a=localStorage.getItem("adminToken");if(!a)return void e.push("/login");if(!(await fetch(`http://localhost:5000/api/menu/${t}`,{method:"DELETE",headers:{Authorization:`Bearer ${a}`}})).ok)throw Error("Failed to delete product");alert("âœ… Produk berhasil dihapus!"),k()}catch(e){console.error("Error deleting product:",e),alert("âŒ Gagal menghapus produk: "+e.message)}},S=e=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e).replace("IDR","Rp");return i?(0,t.jsx)("div",{className:"p-8 flex items-center justify-center min-h-screen",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-500 mx-auto"}),(0,t.jsx)("p",{className:"mt-4 text-gray-600",children:"Memuat data produk..."})]})}):(0,t.jsxs)("div",{className:"p-4 sm:p-8",children:[(0,t.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,t.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,t.jsxs)("div",{className:"hidden sm:grid grid-cols-12 gap-4 bg-orange-100 px-8 py-4 font-bold text-gray-800",children:[(0,t.jsx)("div",{className:"col-span-3",children:"Produk"}),(0,t.jsx)("div",{className:"col-span-2 text-center",children:"Harga"}),(0,t.jsx)("div",{className:"col-span-2 text-center",children:"Stok"}),(0,t.jsx)("div",{className:"col-span-5 text-center",children:"Aksi"})]}),(0,t.jsx)("div",{className:"divide-y divide-gray-200",children:0===l.length?(0,t.jsx)("div",{className:"p-12 text-center",children:(0,t.jsx)("p",{className:"text-gray-600 text-lg",children:"Belum ada produk"})}):l.map(e=>(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"sm:hidden p-4 hover:bg-orange-50 transition-colors",children:(0,t.jsxs)("div",{className:"space-y-3",children:[(0,t.jsxs)("div",{className:"flex justify-between items-start",children:[(0,t.jsxs)("div",{className:"flex-1",children:[(0,t.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,t.jsx)("h3",{className:"font-bold text-gray-900 text-base",children:e.name}),0===e.is_active&&(0,t.jsx)("span",{className:"bg-red-100 text-red-700 text-xs font-bold px-2 py-0.5 rounded-full",children:"NONAKTIF"})]}),(0,t.jsxs)("p",{className:"text-gray-700 font-semibold",children:[S(e.price),"/pcs"]})]}),(0,t.jsxs)("div",{className:"text-right",children:[(0,t.jsx)("p",{className:"text-sm text-gray-600",children:"Stok"}),(0,t.jsx)("p",{className:"font-bold text-gray-900",children:e.stock})]})]}),(0,t.jsx)("div",{className:"flex gap-2",children:(0,t.jsx)("button",{onClick:()=>N(e),className:`flex-1 ${1===e.is_active?"bg-yellow-100 hover:bg-yellow-200 text-yellow-800":"bg-green-100 hover:bg-green-200 text-green-800"} px-3 py-2.5 rounded-full text-sm font-semibold transition-colors`,children:1===e.is_active?"ðŸ”’ Nonaktifkan":"âœ… Aktifkan"})}),(0,t.jsxs)("div",{className:"flex gap-2",children:[(0,t.jsx)("button",{onClick:()=>v("edit",e),className:"flex-1 bg-orange-200 hover:bg-orange-300 text-gray-800 px-4 py-2.5 rounded-full text-sm font-semibold transition-colors",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>w(e.id),className:"flex-1 bg-red-100 hover:bg-red-200 text-red-700 px-4 py-2.5 rounded-full text-sm font-semibold transition-colors",children:"Hapus"})]})]})}),(0,t.jsxs)("div",{className:"hidden sm:grid grid-cols-12 gap-4 px-8 py-5 hover:bg-orange-50 transition-colors items-center",children:[(0,t.jsxs)("div",{className:"col-span-3 flex items-center gap-2",children:[(0,t.jsx)("span",{className:"font-medium text-gray-900",children:e.name}),0===e.is_active&&(0,t.jsx)("span",{className:"bg-red-100 text-red-700 text-xs font-bold px-2 py-1 rounded-full",children:"NONAKTIF"})]}),(0,t.jsx)("div",{className:"col-span-2 text-center",children:(0,t.jsxs)("span",{className:"text-gray-700",children:[S(e.price),"/pcs"]})}),(0,t.jsx)("div",{className:"col-span-2 text-center",children:(0,t.jsx)("span",{className:"text-gray-700 font-medium",children:e.stock})}),(0,t.jsxs)("div",{className:"col-span-5 flex items-center justify-center gap-2",children:[(0,t.jsx)("button",{onClick:()=>N(e),className:`${1===e.is_active?"bg-yellow-100 hover:bg-yellow-200 text-yellow-800":"bg-green-100 hover:bg-green-200 text-green-800"} px-4 py-2 rounded-full text-sm font-semibold transition-colors`,children:1===e.is_active?"ðŸ”’ Nonaktifkan":"âœ… Aktifkan"}),(0,t.jsx)("button",{onClick:()=>v("edit",e),className:"bg-orange-200 hover:bg-orange-300 text-gray-800 px-5 py-2 rounded-full text-sm font-semibold transition-colors",children:"Edit"}),(0,t.jsx)("button",{onClick:()=>w(e.id),className:"bg-red-100 hover:bg-red-200 text-red-700 px-5 py-2 rounded-full text-sm font-semibold transition-colors",children:"Hapus"})]})]})]},e.id))})]}),(0,t.jsx)("div",{className:"mt-6 flex justify-center",children:(0,t.jsx)("button",{onClick:()=>v("add"),className:"bg-black hover:bg-gray-800 text-white px-8 sm:px-12 py-3 rounded-full text-base font-semibold transition-colors w-full sm:w-auto",children:"Tambah Produk"})})]}),c&&(0,t.jsx)("div",{className:"fixed inset-0 backdrop-blur-xs bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,t.jsxs)("div",{className:"bg-white rounded-3xl max-w-lg w-full p-6 sm:p-8 relative my-8",children:[(0,t.jsx)("button",{onClick:y,className:"absolute top-4 right-4 sm:top-6 sm:right-6 text-gray-600 hover:text-gray-800 z-10",children:(0,t.jsx)(s.X,{className:"w-6 h-6"})}),(0,t.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6 sm:mb-8 text-center",children:"edit"===m?"Edit Produk":"Tambah Produk"}),(0,t.jsxs)("form",{onSubmit:j,className:"space-y-4 sm:space-y-6",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-2",children:"Nama Produk"}),(0,t.jsx)("input",{type:"text",value:g.name,onChange:e=>h({...g,name:e.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-transparent text-base text-black",placeholder:"Contoh: Pempek Kapal Selam",required:!0})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-2",children:"Harga (Rp)"}),(0,t.jsx)("input",{type:"number",value:g.price,onChange:e=>h({...g,price:e.target.value}),className:"w-full px-3 sm:px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-transparent text-base text-black",placeholder:"3000",min:"0",required:!0})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-2",children:"Stok"}),(0,t.jsx)("input",{type:"number",value:g.stock,onChange:e=>h({...g,stock:e.target.value}),className:"w-full px-3 sm:px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-transparent text-base text-black",placeholder:"20",min:"0",required:!0})]})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-2",children:"Deskripsi"}),(0,t.jsx)("textarea",{value:g.description,onChange:e=>h({...g,description:e.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-transparent resize-none text-base text-black",rows:3,placeholder:"Deskripsi produk..."})]}),(0,t.jsxs)("div",{children:[(0,t.jsx)("label",{className:"block text-sm font-bold text-black mb-2",children:"URL Gambar"}),(0,t.jsx)("input",{type:"url",value:g.image,onChange:e=>{var t;return t=e.target.value,void(h({...g,image:t}),t&&(t.startsWith("http://")||t.startsWith("https://"))?f(t):f(""))},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-transparent text-base text-black",placeholder:"https://i.imgur.com/abc123.png"}),(0,t.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["ðŸ’¡ Upload gambar ke ",(0,t.jsx)("a",{href:"https://imgur.com",target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:underline font-semibold",children:"Imgur"})," lalu paste link-nya di sini"]}),b&&(0,t.jsxs)("div",{className:"mt-3 relative w-full h-40 sm:h-48 border-2 border-gray-300 rounded-xl overflow-hidden",children:[(0,t.jsx)("img",{src:b,alt:"Preview",className:"w-full h-full object-cover",onError:()=>{f(""),alert("Gagal memuat gambar. Pastikan URL valid dan bisa diakses.")}}),(0,t.jsx)("button",{type:"button",onClick:()=>{f(""),h({...g,image:""})},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 shadow-lg",children:(0,t.jsx)(s.X,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"flex flex-col gap-3 pt-2 sm:pt-4",children:[(0,t.jsx)("button",{type:"submit",className:"w-full bg-orange-400 hover:bg-orange-500 active:bg-orange-600 text-white py-3.5 rounded-full font-bold transition-colors text-base",children:"edit"===m?"Update Produk":"Simpan Produk"}),(0,t.jsx)("button",{type:"button",onClick:y,className:"w-full bg-orange-200 hover:bg-orange-300 active:bg-orange-400 text-gray-800 py-3.5 rounded-full font-semibold transition-colors text-base",children:"Batal"})]})]})]})})]})}e.s(["default",()=>l])}]);