module.exports=[66019,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(36770),e=a.i(50944),f=a.i(33508);let g=(0,a.i(70106).default)("calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);function h(){let a=(0,e.useRouter)(),[h,i]=(0,c.useState)([]),[j,k]=(0,c.useState)([]),[l,m]=(0,c.useState)(!0),[n,o]=(0,c.useState)(""),[p,q]=(0,c.useState)(null),[r,s]=(0,c.useState)(!1),[t,u]=(0,c.useState)(!1),[v,w]=(0,c.useState)(""),[x,y]=(0,c.useState)(""),[z,A]=(0,c.useState)(""),[B,C]=(0,c.useState)(!1),[D,E]=(0,c.useState)("all"),F=[{value:"pending",label:"Menunggu Pembayaran",color:"bg-yellow-100 text-yellow-800"},{value:"confirmed",label:"Pembayaran Dikonfirmasi",color:"bg-blue-100 text-blue-800"},{value:"processing",label:"Sedang Diproses",color:"bg-purple-100 text-purple-800"},{value:"ready",label:"Siap Diambil",color:"bg-indigo-100 text-indigo-800"},{value:"completed",label:"Selesai",color:"bg-green-100 text-green-800"},{value:"cancelled",label:"Dibatalkan",color:"bg-red-100 text-red-800"}];(0,c.useEffect)(()=>{G()},[]),(0,c.useEffect)(()=>{H()},[h,x,z,D]);let G=async()=>{try{m(!0);let b=localStorage.getItem("adminToken");if(!b)return void a.push("/login");let c=await d.orderAPI.getAll(b);i(Array.isArray(c)?c:[])}catch(a){o(a.message||"Gagal memuat pesanan")}finally{m(!1)}},H=()=>{let a=[...h];(x||z)&&(a=a.filter(a=>{let b=new Date(a.created_at),c=x?new Date(x):null,d=z?new Date(z):null;return(c&&c.setHours(0,0,0,0),d&&d.setHours(23,59,59,999),c&&d)?b>=c&&b<=d:c?b>=c:!d||b<=d})),"all"!==D&&(a=a.filter(a=>a.status===D)),k(a)},I=()=>{y(""),A("")},J=async a=>{try{let b=await d.orderAPI.getById(a.toString());q(b),s(!0)}catch(a){alert("Gagal memuat detail: "+a.message)}},K=a=>{q(a),w(a.status),u(!0)},L=async()=>{if(p&&v)try{let a=localStorage.getItem("adminToken");if(!a)return;await d.orderAPI.updateStatus(p.id.toString(),v,a),alert("Status berhasil diupdate!"),u(!1),s(!1),G()}catch(a){alert("Gagal update status: "+a.message)}},M=a=>{let b=F.find(b=>b.value===a);return b?b.label:a},N=a=>{let b=F.find(b=>b.value===a);return b?b.color:"bg-gray-100 text-gray-800"},O=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a),P=a=>new Date(a).toLocaleDateString("id-ID",{day:"2-digit",month:"long",year:"numeric",hour:"2-digit",minute:"2-digit"});return l?(0,b.jsx)("div",{className:"p-4 sm:p-8 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-500 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Memuat pesanan..."})]})}):(0,b.jsxs)("div",{className:"p-4 sm:p-8",children:[(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4 mb-4",children:[(0,b.jsx)("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-800",children:"Daftar Pesanan"}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsxs)("button",{onClick:()=>C(!B),className:"flex items-center gap-2 bg-orange-500 hover:bg-orange-600 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:[(0,b.jsx)(g,{className:"w-4 h-4"}),"Filter"]}),(0,b.jsx)("button",{onClick:G,className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Refresh"})]})]}),B&&(0,b.jsxs)("div",{className:"bg-white rounded-lg shadow-lg p-4 mb-4 border border-gray-200",children:[(0,b.jsx)("h3",{className:"font-bold text-gray-800 mb-3",children:"Filter Pesanan"}),(0,b.jsxs)("div",{className:"mb-4",children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2",children:"Filter Tanggal"}),(0,b.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-3",children:[(0,b.jsx)("div",{children:(0,b.jsx)("input",{type:"date",value:x,onChange:a=>y(a.target.value),placeholder:"Dari Tanggal",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 text-gray-500"})}),(0,b.jsx)("div",{children:(0,b.jsx)("input",{type:"date",value:z,onChange:a=>A(a.target.value),placeholder:"Sampai Tanggal",className:"w-full px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-orange-500 text-gray-500"})}),(0,b.jsx)("button",{onClick:()=>{let a=new Date().toISOString().split("T")[0];y(a),A(a)},className:"bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-lg text-sm font-semibold",children:"Hari Ini"}),(0,b.jsx)("button",{onClick:I,className:"bg-gray-300 hover:bg-gray-400 text-gray-800 px-4 py-2 rounded-lg text-sm font-semibold",children:"Reset Tanggal"})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-xs font-semibold text-gray-700 mb-2",children:"Filter Status"}),(0,b.jsxs)("div",{className:"flex flex-wrap gap-2",children:[(0,b.jsxs)("button",{onClick:()=>E("all"),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-colors ${"all"===D?"bg-orange-500 text-white":"bg-gray-200 text-gray-700 hover:bg-gray-300"}`,children:["Semua (",h.length,")"]}),F.map(a=>{let c=h.filter(b=>b.status===a.value).length;return(0,b.jsxs)("button",{onClick:()=>E(a.value),className:`px-4 py-2 rounded-lg text-sm font-semibold transition-colors ${D===a.value?a.color+" ring-2 ring-offset-1 ring-gray-400":a.color+" opacity-70 hover:opacity-100"}`,children:[a.label," (",c,")"]},a.value)})]})]}),(0,b.jsxs)("div",{className:"mt-3 text-sm text-gray-600 flex justify-between items-center",children:[(0,b.jsxs)("span",{children:["Menampilkan ",j.length," dari ",h.length," pesanan"]}),(x||z||"all"!==D)&&(0,b.jsx)("button",{onClick:()=>{I(),E("all")},className:"text-red-600 hover:text-red-700 font-semibold",children:"Reset Semua Filter"})]})]})]}),n&&(0,b.jsx)("div",{className:"bg-red-100 border border-red-400 text-red-700 px-4 py-3 rounded mb-4",children:n}),0===j.length?(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-8 sm:p-12 text-center",children:(0,b.jsx)("p",{className:"text-gray-600 text-lg",children:0===h.length?"Belum ada pesanan":"Tidak ada pesanan yang sesuai dengan filter"})}):(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)("div",{className:"block lg:hidden space-y-4",children:j.map(a=>(0,b.jsx)("div",{className:"bg-white rounded-lg shadow p-4 text-gray-500",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Order ID"}),(0,b.jsxs)("p",{className:"font-bold",children:["#",a.id.toString().padStart(6,"0")]})]}),(0,b.jsx)("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${N(a.status)}`,children:M(a.status)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Pelanggan"}),(0,b.jsx)("p",{className:"font-semibold",children:a.customer_name})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Tanggal"}),(0,b.jsx)("p",{className:"text-sm",children:P(a.created_at)})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("p",{className:"text-xs text-gray-500",children:"Total"}),(0,b.jsx)("p",{className:"font-bold text-orange-600",children:O(a.total_price)})]}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>J(a.id),className:"flex-1 bg-orange-200 hover:bg-orange-300 text-gray-800 px-4 py-2 rounded-full text-sm font-semibold",children:"Detail"}),(0,b.jsx)("button",{onClick:()=>K(a),className:"flex-1 bg-blue-500 hover:bg-blue-600 text-white px-4 py-2 rounded-full text-sm font-semibold",children:"Update"})]})]})},a.id))}),(0,b.jsx)("div",{className:"hidden lg:block bg-white rounded-lg shadow overflow-hidden",children:(0,b.jsxs)("table",{className:"w-full",children:[(0,b.jsx)("thead",{className:"bg-gray-100",children:(0,b.jsxs)("tr",{children:[(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"Order ID"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"Tanggal"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"Pelanggan"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"Item"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"Total"}),(0,b.jsx)("th",{className:"px-6 py-4 text-left text-sm font-bold text-gray-700",children:"Status"}),(0,b.jsx)("th",{className:"px-6 py-4 text-center text-sm font-bold text-gray-700",children:"Aksi"})]})}),(0,b.jsx)("tbody",{className:"divide-y divide-gray-200 text-gray-600",children:j.map(a=>(0,b.jsxs)("tr",{className:"hover:bg-gray-50",children:[(0,b.jsxs)("td",{className:"px-6 py-4 text-sm font-semibold",children:["#",a.id.toString().padStart(6,"0")]}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm text-gray-600",children:new Date(a.created_at).toLocaleDateString("id-ID",{day:"2-digit",month:"short",year:"numeric"})}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm",children:a.customer_name}),(0,b.jsxs)("td",{className:"px-6 py-4 text-sm",children:[a.item_count," item"]}),(0,b.jsx)("td",{className:"px-6 py-4 text-sm font-semibold text-orange-600",children:O(a.total_price)}),(0,b.jsx)("td",{className:"px-6 py-4",children:(0,b.jsx)("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${N(a.status)}`,children:M(a.status)})}),(0,b.jsx)("td",{className:"px-6 py-4 text-center",children:(0,b.jsx)("button",{onClick:()=>J(a.id),className:"bg-orange-200 hover:bg-orange-300 text-gray-800 px-6 py-2 rounded-full text-sm font-semibold",children:"Cek Detail"})})]},a.id))})]})})]}),r&&p&&(0,b.jsx)("div",{className:"fixed inset-0 text-gray-500 bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto backdrop-blur-xs",children:(0,b.jsxs)("div",{className:"bg-white rounded-3xl max-w-2xl w-full p-6 sm:p-8 relative my-8",children:[(0,b.jsx)("button",{onClick:()=>s(!1),className:"absolute top-4 right-4 sm:top-6 sm:right-6",children:(0,b.jsx)(f.X,{className:"w-6 h-6"})}),(0,b.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6 text-center",children:"Detail Pesanan"}),(0,b.jsxs)("div",{className:"space-y-4",children:[(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b text-sm sm:text-base",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Nama"}),(0,b.jsx)("span",{children:p.customer_name})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b text-sm sm:text-base",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Telepon"}),(0,b.jsx)("span",{children:p.customer_phone})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b text-sm sm:text-base",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Order ID"}),(0,b.jsxs)("span",{children:["#",p.id.toString().padStart(6,"0")]})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b text-sm sm:text-base",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Tanggal Pesanan"}),(0,b.jsx)("span",{children:P(p.created_at)})]}),(0,b.jsxs)("div",{className:"py-2 border-b",children:[(0,b.jsx)("span",{className:"font-semibold block mb-2 text-sm sm:text-base",children:"Produk"}),p.items&&p.items.map((a,c)=>(0,b.jsxs)("div",{className:"ml-4 text-sm text-gray-700 flex justify-between items-start",children:[(0,b.jsxs)("div",{children:[(0,b.jsxs)("span",{children:["â€¢ ",a.menu_name," (",a.quantity,"x)"]}),a.notes&&(0,b.jsxs)("p",{className:"text-xs text-gray-500 italic ml-4",children:["ðŸ“ ",a.notes]})]}),(0,b.jsx)("span",{className:"font-semibold",children:O(a.price*a.quantity)})]},c))]}),(0,b.jsxs)("div",{className:"py-2 border-b text-sm sm:text-base",children:[(0,b.jsx)("span",{className:"font-semibold block mb-2",children:"Alamat Pengambilan"}),(0,b.jsx)("span",{className:"text-gray-700",children:p.customer_address||"Diambil di outlet"})]}),(0,b.jsxs)("div",{className:"py-2 border-b text-sm sm:text-base",children:[(0,b.jsx)("span",{className:"font-semibold block mb-2",children:"Catatan"}),(0,b.jsx)("span",{className:"text-gray-700",children:p.notes||"-"})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b text-sm sm:text-base",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Status"}),(0,b.jsx)("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${N(p.status)}`,children:M(p.status)})]}),(0,b.jsxs)("div",{className:"flex justify-between py-2 border-b text-sm sm:text-base",children:[(0,b.jsx)("span",{className:"font-semibold",children:"Total Bayar"}),(0,b.jsx)("span",{className:"text-lg sm:text-xl font-bold text-orange-600",children:O(p.total_price)})]}),(0,b.jsxs)("div",{className:"flex flex-col sm:flex-row gap-3 mt-6",children:[(0,b.jsx)("button",{onClick:()=>{s(!1),K(p)},className:"flex-1 bg-orange-400 hover:bg-orange-500 text-white py-3 rounded-full font-semibold",children:"Update Status"}),(0,b.jsx)("button",{onClick:()=>s(!1),className:"flex-1 bg-orange-200 hover:bg-orange-300 text-gray-800 py-3 rounded-full font-semibold",children:"Tutup"})]})]})]})}),t&&p&&(0,b.jsx)("div",{className:"fixed inset-0 text-gray-500 bg-opacity-50 flex items-center justify-center z-50 p-4 backdrop-blur-xs",children:(0,b.jsxs)("div",{className:"bg-white rounded-3xl max-w-md w-full p-6 sm:p-8 relative",children:[(0,b.jsx)("button",{onClick:()=>u(!1),className:"absolute top-4 right-4 sm:top-6 sm:right-6",children:(0,b.jsx)(f.X,{className:"w-6 h-6"})}),(0,b.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6 text-center",children:"Update Status"}),(0,b.jsxs)("div",{className:"mb-6",children:[(0,b.jsxs)("p",{className:"text-sm text-gray-600 mb-4",children:["Order #",p.id.toString().padStart(6,"0")," -"," ",p.customer_name]}),(0,b.jsx)("label",{className:"block text-sm font-semibold mb-3",children:"Pilih Status Baru:"}),(0,b.jsx)("select",{value:v,onChange:a=>w(a.target.value),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-lg focus:outline-none focus:border-orange-500 text-sm sm:text-base",children:F.map(a=>(0,b.jsx)("option",{value:a.value,children:a.label},a.value))})]}),(0,b.jsxs)("div",{className:"flex gap-3",children:[(0,b.jsx)("button",{onClick:L,className:"flex-1 bg-green-500 hover:bg-green-600 text-white py-3 rounded-full font-semibold",children:"Simpan"}),(0,b.jsx)("button",{onClick:()=>u(!1),className:"flex-1 bg-gray-300 hover:bg-gray-400 text-gray-800 py-3 rounded-full font-semibold",children:"Batal"})]})]})})]})}a.s(["default",()=>h],66019)}];

//# sourceMappingURL=app_app_%28admin%29_%28dashboard%29_orders_page_tsx_45504ecb._.js.map