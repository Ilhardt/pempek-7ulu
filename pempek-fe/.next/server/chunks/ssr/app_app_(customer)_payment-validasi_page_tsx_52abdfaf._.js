module.exports=[57093,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(58652),e=a.i(50944),f=a.i(36770),g=a.i(70106);let h=(0,g.default)("refresh-cw",[["path",{d:"M3 12a9 9 0 0 1 9-9 9.75 9.75 0 0 1 6.74 2.74L21 8",key:"v9h5vc"}],["path",{d:"M21 3v5h-5",key:"1q7to0"}],["path",{d:"M21 12a9 9 0 0 1-9 9 9.75 9.75 0 0 1-6.74-2.74L3 16",key:"3uifl3"}],["path",{d:"M8 16H3v5",key:"1cv678"}]]);function i({isChecking:a,lastChecked:c}){return(0,b.jsxs)("div",{className:"mb-6 flex items-center justify-center gap-2 text-sm text-gray-600",children:[(0,b.jsx)(h,{className:`w-4 h-4 ${a?"animate-spin":""}`}),(0,b.jsxs)("span",{children:[a?"Mengecek status...":"Auto-refresh aktif",c&&(0,b.jsxs)("span",{className:"ml-2 text-xs text-gray-500",children:["(terakhir dicek: ",c.toLocaleTimeString("id-ID"),")"]})]})]})}var j=a.i(16201),k=a.i(41710),l=a.i(45222),m=a.i(62722);function n({status:a,paymentMethod:c}){let d=(()=>{if("whatsapp"===c&&"pending"===a)return{icon:(0,b.jsx)(l.MessageCircle,{className:"w-24 h-24 text-green-500"}),title:"Perlu Bantuan Admin? ðŸ¤",description:"Anda memilih untuk berkonsultasi dengan admin kami terkait metode pembayaran alternatif."};switch(a){case"approved":return{icon:(0,b.jsx)(j.CheckCircle,{className:"w-24 h-24 text-green-500"}),title:"Pembayaran Terverifikasi! âœ…",description:"Selamat! Pembayaran Anda telah dikonfirmasi oleh admin."};case"rejected":return{icon:(0,b.jsx)(m.XCircle,{className:"w-24 h-24 text-red-500"}),title:"Pembayaran Ditolak âŒ",description:"Maaf, pembayaran Anda tidak dapat diverifikasi."};default:return{icon:(0,b.jsx)(k.Clock,{className:"w-24 h-24 text-amber-500"}),title:"Menunggu Validasi Admin â³",description:"Pembayaran Anda sedang dalam proses pengecekan."}}})();return(0,b.jsxs)("div",{className:"flex flex-col items-center text-center mb-8",children:[(0,b.jsx)("div",{className:"mb-6 animate-pulse",children:d.icon}),(0,b.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:d.title}),(0,b.jsx)("p",{className:"text-lg text-gray-600 mb-6",children:d.description})]})}function o({orderId:a,customerName:c,itemName:d,totalPrice:e,paymentMethod:f,status:g}){let h=(()=>{if("whatsapp"===f&&"pending"===g)return{bgColor:"bg-green-50",borderColor:"border-green-200"};switch(g){case"approved":return{bgColor:"bg-green-50",borderColor:"border-green-200"};case"rejected":return{bgColor:"bg-red-50",borderColor:"border-red-200"};default:return{bgColor:"bg-amber-50",borderColor:"border-amber-200"}}})();return(0,b.jsxs)("div",{className:`${h.bgColor} border-2 ${h.borderColor} rounded-2xl p-6 mb-8`,children:[(0,b.jsx)("h2",{className:"font-bold text-gray-900 text-xl mb-4",children:"ðŸ“‹ Detail Pesanan"}),(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Order ID:"}),(0,b.jsxs)("span",{className:"font-mono font-bold text-gray-900 text-lg",children:["#",a]})]}),(0,b.jsx)("div",{className:"border-t border-gray-300 pt-3"}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Nama Pemesan:"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:c})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Pesanan:"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900",children:d})]}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Total Pembayaran:"}),(0,b.jsx)("span",{className:"font-bold text-red-600 text-xl",children:new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(e).replace("IDR","Rp")})]}),(0,b.jsx)("div",{className:"border-t border-gray-300 pt-3"}),(0,b.jsxs)("div",{className:"flex justify-between items-center",children:[(0,b.jsx)("span",{className:"text-gray-600 font-medium",children:"Metode Konfirmasi:"}),(0,b.jsx)("span",{className:"font-semibold text-gray-900 flex items-center gap-2",children:"whatsapp"===f?(0,b.jsxs)(b.Fragment,{children:[(0,b.jsx)(l.MessageCircle,{className:"w-4 h-4 text-green-600"}),"WhatsApp"]}):(0,b.jsx)(b.Fragment,{children:"QRIS"})})]})]})]})}function p({status:a,paymentMethod:c}){let d=(()=>{if("whatsapp"===c&&"pending"===a)return{bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",message:"Silakan hubungi admin kami via WhatsApp untuk mengkonfirmasi pembayaran Anda. Setelah admin mengkonfirmasi, pesanan akan segera diproses."};switch(a){case"approved":return{bgColor:"bg-green-50",borderColor:"border-green-200",textColor:"text-green-800",message:"Pesanan Anda sedang diproses dan akan segera disiapkan. Terima kasih!"};case"rejected":return{bgColor:"bg-red-50",borderColor:"border-red-200",textColor:"text-red-800",message:"Silakan hubungi kami untuk informasi lebih lanjut atau lakukan pemesanan ulang."};default:return{bgColor:"bg-amber-50",borderColor:"border-amber-200",textColor:"text-amber-800",message:"Admin kami akan segera memverifikasi bukti pembayaran Anda. Mohon tunggu beberapa saat."}}})();return(0,b.jsx)("div",{className:`${d.bgColor} border-2 ${d.borderColor} rounded-2xl p-6 mb-8`,children:(0,b.jsx)("p",{className:`${d.textColor} text-center font-medium leading-relaxed`,children:d.message})})}function q(){return(0,b.jsxs)("div",{className:"bg-blue-50 border-2 border-blue-200 rounded-2xl p-6 mb-8",children:[(0,b.jsxs)("h3",{className:"font-bold text-blue-900 text-lg mb-3 flex items-center gap-2",children:[(0,b.jsx)(l.MessageCircle,{className:"w-5 h-5"}),"Langkah Selanjutnya"]}),(0,b.jsxs)("ol",{className:"list-decimal list-inside space-y-2 text-blue-800",children:[(0,b.jsx)("li",{children:'Klik tombol "Hubungi Admin untuk Metode Alternatif" di bawah'}),(0,b.jsx)("li",{children:"Konfirmasi pembayaran Anda ke admin"}),(0,b.jsx)("li",{children:"Tunggu admin mengkonfirmasi pesanan Anda"})]})]})}let r=(0,g.default)("house",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-6a2 2 0 0 1 2.582 0l7 6A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"r6nss1"}]]);function s({status:a,paymentMethod:c,isChecking:d,onRefresh:f,onWhatsAppContact:g}){let i=(0,e.useRouter)();return(0,b.jsxs)("div",{className:"space-y-4",children:["pending"===a&&(0,b.jsxs)(b.Fragment,{children:["upload"===c&&(0,b.jsxs)("button",{onClick:f,disabled:d,className:"w-full bg-blue-600 text-white font-bold text-lg py-5 rounded-full hover:bg-blue-700 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3 disabled:bg-gray-400 disabled:cursor-not-allowed",children:[(0,b.jsx)(h,{className:`w-6 h-6 ${d?"animate-spin":""}`}),d?"Mengecek...":"Refresh Status"]}),(0,b.jsxs)("button",{onClick:g,className:"w-full bg-gradient-to-r from-green-600 to-green-500 text-white font-bold text-lg py-5 rounded-full hover:from-green-700 hover:to-green-600 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3 transform hover:scale-[1.02]",children:[(0,b.jsx)(l.MessageCircle,{className:"w-6 h-6"}),"whatsapp"===c?"ðŸ’¬ Hubungi Admin untuk Metode Alternatif":"Hubungi Admin via WhatsApp"]}),(0,b.jsx)("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 border border-blue-200 rounded-xl p-4",children:(0,b.jsx)("p",{className:"text-center text-sm text-blue-800 font-medium",children:"whatsapp"===c?"ðŸ¤ Admin siap membantu Anda dengan opsi pembayaran lain (Transfer Bank, Cash, dll)":"ðŸ’¡ Untuk mempercepat validasi, hubungi admin kami"})})]}),"approved"===a&&(0,b.jsxs)("button",{onClick:()=>i.push("/"),className:"w-full bg-blue-600 text-white font-bold text-lg py-5 rounded-full hover:bg-blue-700 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3",children:[(0,b.jsx)(r,{className:"w-6 h-6"}),"Kembali ke Beranda"]}),"rejected"===a&&(0,b.jsxs)(b.Fragment,{children:[(0,b.jsxs)("button",{onClick:g,className:"w-full bg-green-600 text-white font-bold text-lg py-5 rounded-full hover:bg-green-700 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3",children:[(0,b.jsx)(l.MessageCircle,{className:"w-6 h-6"}),"Hubungi Admin"]}),(0,b.jsx)("button",{onClick:()=>i.push("/order"),className:"w-full bg-red-600 text-white font-bold text-lg py-5 rounded-full hover:bg-red-700 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3",children:"Pesan Ulang"})]})]})}function t(){let a=(0,e.useRouter)();return(0,b.jsx)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 sm:p-12",children:(0,b.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,b.jsx)("div",{className:"mb-6",children:(0,b.jsx)(k.Clock,{className:"w-24 h-24 text-red-500"})}),(0,b.jsx)("h1",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-4",children:"âš ï¸ Data Pesanan Tidak Ditemukan"}),(0,b.jsx)("p",{className:"text-lg text-gray-600 mb-8",children:"Sepertinya Anda belum melakukan pemesanan atau data pesanan hilang."}),(0,b.jsxs)("div",{className:"space-y-4 w-full",children:[(0,b.jsx)("button",{onClick:()=>a.push("/order"),className:"w-full bg-red-600 text-white font-bold text-lg py-5 rounded-full hover:bg-red-700 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3",children:"ðŸ›ï¸ Buat Pesanan Baru"}),(0,b.jsxs)("button",{onClick:()=>a.push("/"),className:"w-full bg-gray-600 text-white font-bold text-lg py-5 rounded-full hover:bg-gray-700 transition-all shadow-lg hover:shadow-xl flex items-center justify-center gap-3",children:[(0,b.jsx)(r,{className:"w-6 h-6"}),"Kembali ke Beranda"]})]}),(0,b.jsx)("div",{className:"mt-8 p-6 bg-amber-50 rounded-2xl border-2 border-amber-200",children:(0,b.jsxs)("p",{className:"text-amber-800 text-sm",children:["ðŸ’¡ ",(0,b.jsx)("strong",{children:"Tip:"})," Pastikan Anda sudah membuat pesanan terlebih dahulu sebelum mengakses halaman ini."]})})]})})}function u(){let a=(0,e.useRouter)(),g=(0,e.useSearchParams)(),[h,j]=(0,c.useState)({orderId:"",customerName:"Customer",itemName:"Pempek",totalPrice:0,paymentMethod:"upload"}),[k,l]=(0,c.useState)("pending"),[m,r]=(0,c.useState)(!1),[u,v]=(0,c.useState)(null),w=async()=>{let a=h.orderId;if(!a||""===a)return void console.warn("No order ID available for checking");try{r(!0),console.log("ðŸ” Checking payment status for order:",a);let b=await f.orderAPI.getById(a);if(console.log("ðŸ“¦ Full order data:",b),console.log("ðŸ“Š Order status field:",b.status),b&&b.status){let a=b.status.toLowerCase();console.log("âœ… Status from server:",a);let c="pending";"confirmed"===a||"approved"===a?c="approved":"cancelled"===a||"rejected"===a?c="rejected":"pending"===a&&(c="pending"),console.log("ðŸ”„ Mapped status:",c),c!==k&&(console.log("ðŸ”„ Status changed from",k,"to",c),l(c),"approved"===c?alert("ðŸŽ‰ Pembayaran Anda telah diverifikasi!\n\nPesanan sedang diproses."):"rejected"===c&&alert("âŒ Pembayaran ditolak.\n\nSilakan hubungi admin untuk informasi lebih lanjut."))}v(new Date)}catch(a){console.error("âŒ Error checking payment status:",a.message)}finally{r(!1)}},x=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a).replace("IDR","Rp");return(0,c.useEffect)(()=>{let a=g.get("status");a&&l(a);let b=sessionStorage.getItem("payment_order_id")||"",c=sessionStorage.getItem("payment_customer_name")||"Customer",d=sessionStorage.getItem("payment_item_name")||"Pempek",e=parseFloat(sessionStorage.getItem("payment_total")||"0"),f=sessionStorage.getItem("payment_method")||"upload";b?j({orderId:b,customerName:c,itemName:d,totalPrice:e,paymentMethod:f}):console.warn("âš ï¸ No order ID found - user might need to go back to payment")},[g,a]),(0,c.useEffect)(()=>{if(!h.orderId)return;w();let a=null;return"pending"===k&&(console.log("â±ï¸ Starting auto-refresh (every 10 seconds)"),a=setInterval(()=>{w()},1e4)),()=>{a&&(console.log("ðŸ›‘ Stopping auto-refresh"),clearInterval(a))}},[h.orderId,k]),(0,b.jsxs)("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-100",children:[(0,b.jsx)(d.default,{}),(0,b.jsx)("div",{className:"pt-20 min-h-screen py-16 mt-6",children:(0,b.jsx)("div",{className:"max-w-2xl mx-auto px-4 sm:px-6 lg:px-8",children:h.orderId?(0,b.jsxs)("div",{className:"bg-white rounded-3xl shadow-2xl p-8 sm:p-12",children:["pending"===k&&"upload"===h.paymentMethod&&(0,b.jsx)(i,{isChecking:m,lastChecked:u}),(0,b.jsx)(n,{status:k,paymentMethod:h.paymentMethod}),(0,b.jsx)(o,{orderId:h.orderId,customerName:h.customerName,itemName:h.itemName,totalPrice:h.totalPrice,paymentMethod:h.paymentMethod,status:k}),(0,b.jsx)(p,{status:k,paymentMethod:h.paymentMethod}),"whatsapp"===h.paymentMethod&&"pending"===k&&(0,b.jsx)(q,{}),(0,b.jsx)(s,{status:k,paymentMethod:h.paymentMethod,isChecking:m,onRefresh:w,onWhatsAppContact:()=>{let a="";a="whatsapp"===h.paymentMethod&&"pending"===k?encodeURIComponent(`Halo Admin Pempek 7 Ulu! ðŸ™

Saya mengalami kendala dengan pembayaran QRIS dan membutuhkan bantuan.

ðŸ“‹ Detail Pesanan:
â€¢ Order ID: ${h.orderId}
â€¢ Nama: ${h.customerName}
â€¢ Pesanan: ${h.itemName}
â€¢ Total: ${x(h.totalPrice)}

âŒ Masalah: QRIS tidak bisa dibuka / error saat scan

Apakah ada metode pembayaran alternatif (transfer bank)? Atau bagaimana solusinya kak?

Mohon bantuannya segera ya! Terima kasih ðŸ™`):"upload"===h.paymentMethod&&"pending"===k?encodeURIComponent(`Halo Admin Pempek 7 Ulu! ðŸ‘‹

Saya ingin menanyakan status pembayaran saya:

ðŸ“‹ Order ID: ${h.orderId}
ðŸ‘¤ Nama: ${h.customerName}
ðŸ›ï¸ Pesanan: ${h.itemName}
ðŸ’° Total: ${x(h.totalPrice)}

âœ… Bukti pembayaran sudah diupload

Mohon dicek dan dikonfirmasi ya kak! ðŸ™`):encodeURIComponent(`Halo Admin Pempek 7 Ulu! ðŸ‘‹

Saya ingin menanyakan pesanan saya:

ðŸ“‹ Order ID: ${h.orderId}
ðŸ‘¤ Nama: ${h.customerName}
ðŸ›ï¸ Pesanan: ${h.itemName}
ðŸ’° Total: ${x(h.totalPrice)}

Mohon infonya ya kak! ðŸ™`),window.open(`https://wa.me/628557694746?text=${a}`,"_blank")}})]}):(0,b.jsx)(t,{})})})]})}function v(){return(0,b.jsx)(c.Suspense,{fallback:(0,b.jsx)("div",{className:"min-h-screen bg-gradient-to-br from-amber-50 to-orange-100 flex items-center justify-center",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Loading..."})]})}),children:(0,b.jsx)(u,{})})}a.s(["default",()=>v],57093)}];

//# sourceMappingURL=app_app_%28customer%29_payment-validasi_page_tsx_52abdfaf._.js.map