module.exports=[16413,a=>{"use strict";var b=a.i(87924),c=a.i(72131),d=a.i(50944),e=a.i(33508);function f(){let a=(0,d.useRouter)(),[f,g]=(0,c.useState)([]),[h,i]=(0,c.useState)(!0),[j,k]=(0,c.useState)(!1),[l,m]=(0,c.useState)("add"),[n,o]=(0,c.useState)(null),[p,q]=(0,c.useState)({name:"",price:"",stock:"",description:"",image:""}),[r,s]=(0,c.useState)("");(0,c.useEffect)(()=>{t()},[]);let t=async()=>{try{i(!0);let b=localStorage.getItem("adminToken");if(!b)return void a.push("/login");let c=await fetch("http://localhost:5000/api/menu/all",{headers:{Authorization:`Bearer ${b}`}});if(!c.ok)throw Error("Failed to fetch products");let d=await c.json(),e=d.data||d;g(Array.isArray(e)?e:[])}catch(a){console.error("Error fetching products:",a),alert("Gagal memuat data produk")}finally{i(!1)}},u=(a,b)=>{m(a),"edit"===a&&b?(o(b),q({name:b.name,price:b.price.toString(),stock:b.stock.toString(),description:b.description||"",image:b.image||""}),s(b.image||"")):(o(null),q({name:"",price:"",stock:"",description:"",image:""}),s("")),k(!0)},v=()=>{k(!1),o(null),s(""),q({name:"",price:"",stock:"",description:"",image:""})},w=async b=>{if(b.preventDefault(),!p.name||!p.price||!p.stock)return void alert("Mohon lengkapi Nama, Harga, dan Stok produk");try{let b=localStorage.getItem("adminToken");if(!b)return void a.push("/login");let c={name:p.name,price:parseFloat(p.price),stock:parseInt(p.stock),description:p.description||null,image:p.image||null},d="edit"===l?`http://localhost:5000/api/menu/${n?.id}`:"http://localhost:5000/api/menu";if(!(await fetch(d,{method:"edit"===l?"PUT":"POST",headers:{"Content-Type":"application/json",Authorization:`Bearer ${b}`},body:JSON.stringify(c)})).ok)throw Error("Failed to save product");alert("edit"===l?"âœ… Produk berhasil diupdate!":"âœ… Produk berhasil ditambahkan!"),v(),t()}catch(a){console.error("Error saving product:",a),alert("âŒ Gagal menyimpan produk: "+a.message)}},x=async b=>{let c=+(1!==b.is_active);if(confirm(`Apakah Anda yakin ingin ${1===c?"mengaktifkan":"menonaktifkan"} produk "${b.name}"?

${0===c?"âš ï¸ Produk tidak akan muncul di halaman order customer":"âœ… Produk akan muncul kembali di halaman order customer"}`))try{let d=localStorage.getItem("adminToken");if(!d)return void a.push("/login");if(!(await fetch(`http://localhost:5000/api/menu/${b.id}`,{method:"PUT",headers:{"Content-Type":"application/json",Authorization:`Bearer ${d}`},body:JSON.stringify({name:b.name,price:b.price,stock:b.stock,description:b.description,image:b.image,is_active:c})})).ok)throw Error("Failed to toggle product status");alert(`âœ… Produk berhasil ${1===c?"diaktifkan":"dinonaktifkan"}!`),t()}catch(a){console.error("Error toggling product status:",a),alert("âŒ Gagal mengubah status produk: "+a.message)}},y=async b=>{if(confirm("Apakah Anda yakin ingin menghapus produk ini?"))try{let c=localStorage.getItem("adminToken");if(!c)return void a.push("/login");if(!(await fetch(`http://localhost:5000/api/menu/${b}`,{method:"DELETE",headers:{Authorization:`Bearer ${c}`}})).ok)throw Error("Failed to delete product");alert("âœ… Produk berhasil dihapus!"),t()}catch(a){console.error("Error deleting product:",a),alert("âŒ Gagal menghapus produk: "+a.message)}},z=a=>new Intl.NumberFormat("id-ID",{style:"currency",currency:"IDR",minimumFractionDigits:0}).format(a).replace("IDR","Rp");return h?(0,b.jsx)("div",{className:"p-8 flex items-center justify-center min-h-screen",children:(0,b.jsxs)("div",{className:"text-center",children:[(0,b.jsx)("div",{className:"animate-spin rounded-full h-16 w-16 border-b-2 border-orange-500 mx-auto"}),(0,b.jsx)("p",{className:"mt-4 text-gray-600",children:"Memuat data produk..."})]})}):(0,b.jsxs)("div",{className:"p-4 sm:p-8",children:[(0,b.jsxs)("div",{className:"max-w-4xl mx-auto",children:[(0,b.jsxs)("div",{className:"bg-white rounded-2xl shadow-lg overflow-hidden",children:[(0,b.jsxs)("div",{className:"hidden sm:grid grid-cols-12 gap-4 bg-orange-100 px-8 py-4 font-bold text-gray-800",children:[(0,b.jsx)("div",{className:"col-span-3",children:"Produk"}),(0,b.jsx)("div",{className:"col-span-2 text-center",children:"Harga"}),(0,b.jsx)("div",{className:"col-span-2 text-center",children:"Stok"}),(0,b.jsx)("div",{className:"col-span-5 text-center",children:"Aksi"})]}),(0,b.jsx)("div",{className:"divide-y divide-gray-200",children:0===f.length?(0,b.jsx)("div",{className:"p-12 text-center",children:(0,b.jsx)("p",{className:"text-gray-600 text-lg",children:"Belum ada produk"})}):f.map(a=>(0,b.jsxs)("div",{children:[(0,b.jsx)("div",{className:"sm:hidden p-4 hover:bg-orange-50 transition-colors",children:(0,b.jsxs)("div",{className:"space-y-3",children:[(0,b.jsxs)("div",{className:"flex justify-between items-start",children:[(0,b.jsxs)("div",{className:"flex-1",children:[(0,b.jsxs)("div",{className:"flex items-center gap-2 mb-1",children:[(0,b.jsx)("h3",{className:"font-bold text-gray-900 text-base",children:a.name}),0===a.is_active&&(0,b.jsx)("span",{className:"bg-red-100 text-red-700 text-xs font-bold px-2 py-0.5 rounded-full",children:"NONAKTIF"})]}),(0,b.jsxs)("p",{className:"text-gray-700 font-semibold",children:[z(a.price),"/pcs"]})]}),(0,b.jsxs)("div",{className:"text-right",children:[(0,b.jsx)("p",{className:"text-sm text-gray-600",children:"Stok"}),(0,b.jsx)("p",{className:"font-bold text-gray-900",children:a.stock})]})]}),(0,b.jsx)("div",{className:"flex gap-2",children:(0,b.jsx)("button",{onClick:()=>x(a),className:`flex-1 ${1===a.is_active?"bg-yellow-100 hover:bg-yellow-200 text-yellow-800":"bg-green-100 hover:bg-green-200 text-green-800"} px-3 py-2.5 rounded-full text-sm font-semibold transition-colors`,children:1===a.is_active?"ðŸ”’ Nonaktifkan":"âœ… Aktifkan"})}),(0,b.jsxs)("div",{className:"flex gap-2",children:[(0,b.jsx)("button",{onClick:()=>u("edit",a),className:"flex-1 bg-orange-200 hover:bg-orange-300 text-gray-800 px-4 py-2.5 rounded-full text-sm font-semibold transition-colors",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>y(a.id),className:"flex-1 bg-red-100 hover:bg-red-200 text-red-700 px-4 py-2.5 rounded-full text-sm font-semibold transition-colors",children:"Hapus"})]})]})}),(0,b.jsxs)("div",{className:"hidden sm:grid grid-cols-12 gap-4 px-8 py-5 hover:bg-orange-50 transition-colors items-center",children:[(0,b.jsxs)("div",{className:"col-span-3 flex items-center gap-2",children:[(0,b.jsx)("span",{className:"font-medium text-gray-900",children:a.name}),0===a.is_active&&(0,b.jsx)("span",{className:"bg-red-100 text-red-700 text-xs font-bold px-2 py-1 rounded-full",children:"NONAKTIF"})]}),(0,b.jsx)("div",{className:"col-span-2 text-center",children:(0,b.jsxs)("span",{className:"text-gray-700",children:[z(a.price),"/pcs"]})}),(0,b.jsx)("div",{className:"col-span-2 text-center",children:(0,b.jsx)("span",{className:"text-gray-700 font-medium",children:a.stock})}),(0,b.jsxs)("div",{className:"col-span-5 flex items-center justify-center gap-2",children:[(0,b.jsx)("button",{onClick:()=>x(a),className:`${1===a.is_active?"bg-yellow-100 hover:bg-yellow-200 text-yellow-800":"bg-green-100 hover:bg-green-200 text-green-800"} px-4 py-2 rounded-full text-sm font-semibold transition-colors`,children:1===a.is_active?"ðŸ”’ Nonaktifkan":"âœ… Aktifkan"}),(0,b.jsx)("button",{onClick:()=>u("edit",a),className:"bg-orange-200 hover:bg-orange-300 text-gray-800 px-5 py-2 rounded-full text-sm font-semibold transition-colors",children:"Edit"}),(0,b.jsx)("button",{onClick:()=>y(a.id),className:"bg-red-100 hover:bg-red-200 text-red-700 px-5 py-2 rounded-full text-sm font-semibold transition-colors",children:"Hapus"})]})]})]},a.id))})]}),(0,b.jsx)("div",{className:"mt-6 flex justify-center",children:(0,b.jsx)("button",{onClick:()=>u("add"),className:"bg-black hover:bg-gray-800 text-white px-8 sm:px-12 py-3 rounded-full text-base font-semibold transition-colors w-full sm:w-auto",children:"Tambah Produk"})})]}),j&&(0,b.jsx)("div",{className:"fixed inset-0 backdrop-blur-xs bg-opacity-50 flex items-center justify-center z-50 p-4 overflow-y-auto",children:(0,b.jsxs)("div",{className:"bg-white rounded-3xl max-w-lg w-full p-6 sm:p-8 relative my-8",children:[(0,b.jsx)("button",{onClick:v,className:"absolute top-4 right-4 sm:top-6 sm:right-6 text-gray-600 hover:text-gray-800 z-10",children:(0,b.jsx)(e.X,{className:"w-6 h-6"})}),(0,b.jsx)("h2",{className:"text-xl sm:text-2xl font-bold text-gray-900 mb-6 sm:mb-8 text-center",children:"edit"===l?"Edit Produk":"Tambah Produk"}),(0,b.jsxs)("form",{onSubmit:w,className:"space-y-4 sm:space-y-6",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-black mb-2",children:"Nama Produk"}),(0,b.jsx)("input",{type:"text",value:p.name,onChange:a=>q({...p,name:a.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-transparent text-base text-black",placeholder:"Contoh: Pempek Kapal Selam",required:!0})]}),(0,b.jsxs)("div",{className:"grid grid-cols-2 gap-3 sm:gap-4",children:[(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-black mb-2",children:"Harga (Rp)"}),(0,b.jsx)("input",{type:"number",value:p.price,onChange:a=>q({...p,price:a.target.value}),className:"w-full px-3 sm:px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-transparent text-base text-black",placeholder:"3000",min:"0",required:!0})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-black mb-2",children:"Stok"}),(0,b.jsx)("input",{type:"number",value:p.stock,onChange:a=>q({...p,stock:a.target.value}),className:"w-full px-3 sm:px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-transparent text-base text-black",placeholder:"20",min:"0",required:!0})]})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-black mb-2",children:"Deskripsi"}),(0,b.jsx)("textarea",{value:p.description,onChange:a=>q({...p,description:a.target.value}),className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-transparent resize-none text-base text-black",rows:3,placeholder:"Deskripsi produk..."})]}),(0,b.jsxs)("div",{children:[(0,b.jsx)("label",{className:"block text-sm font-bold text-black mb-2",children:"URL Gambar"}),(0,b.jsx)("input",{type:"url",value:p.image,onChange:a=>{var b;return b=a.target.value,void(q({...p,image:b}),b&&(b.startsWith("http://")||b.startsWith("https://"))?s(b):s(""))},className:"w-full px-4 py-3 border-2 border-gray-300 rounded-xl focus:outline-none focus:ring-2 focus:ring-orange-400 focus:border-transparent text-base text-black",placeholder:"https://i.imgur.com/abc123.png"}),(0,b.jsxs)("p",{className:"text-xs text-gray-500 mt-2",children:["ðŸ’¡ Upload gambar ke ",(0,b.jsx)("a",{href:"https://imgur.com",target:"_blank",rel:"noopener noreferrer",className:"text-orange-500 hover:underline font-semibold",children:"Imgur"})," lalu paste link-nya di sini"]}),r&&(0,b.jsxs)("div",{className:"mt-3 relative w-full h-40 sm:h-48 border-2 border-gray-300 rounded-xl overflow-hidden",children:[(0,b.jsx)("img",{src:r,alt:"Preview",className:"w-full h-full object-cover",onError:()=>{s(""),alert("Gagal memuat gambar. Pastikan URL valid dan bisa diakses.")}}),(0,b.jsx)("button",{type:"button",onClick:()=>{s(""),q({...p,image:""})},className:"absolute top-2 right-2 bg-red-500 text-white p-2 rounded-full hover:bg-red-600 shadow-lg",children:(0,b.jsx)(e.X,{className:"w-4 h-4"})})]})]}),(0,b.jsxs)("div",{className:"flex flex-col gap-3 pt-2 sm:pt-4",children:[(0,b.jsx)("button",{type:"submit",className:"w-full bg-orange-400 hover:bg-orange-500 active:bg-orange-600 text-white py-3.5 rounded-full font-bold transition-colors text-base",children:"edit"===l?"Update Produk":"Simpan Produk"}),(0,b.jsx)("button",{type:"button",onClick:v,className:"w-full bg-orange-200 hover:bg-orange-300 active:bg-orange-400 text-gray-800 py-3.5 rounded-full font-semibold transition-colors text-base",children:"Batal"})]})]})]})})]})}a.s(["default",()=>f])}];

//# sourceMappingURL=app_app_%28admin%29_%28dashboard%29_products_page_tsx_34558b5d._.js.map